<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
    <title>Frogger</title>
	<link rel="stylesheet" type="text/css" href="stile.css">
</head>

<body>
	<h1>FROGGER</h1>
	<div style="text-align:center">
        <canvas id="canv" width="700" height="500"></canvas>
    </div>
	<div style="text-align:center">
		<table id="tabellaPunti">
			<tr>
				<td>Punteggio:</td>
				<td><span id="contPunteggio">0</span></td>
			</tr>
		</table>
    </div>
	
	<script src="gestioneTasti.js"></script>
	<script src="giocatore.js"></script>
	<script src="terreno.js"></script>
	<script src="terrenoHandler.js"></script>
	<script src="ostacolo.js"></script>
	
    <script>
        var canvas = document.getElementById("canv");
        var contPunteggio = document.getElementById("contPunteggio");
        //var contPunteggioMax = document.getElementById("contPunteggio");
        var ctx = canvas.getContext("2d");
		
		var punteggio=0;
		var punteggioMax=0;
        var dimXcanv = canvas.width;
        var dimYcanv = canvas.height;
		var velocitaScrolling=.5;
        var stop = false;
		
        let terrHandler = new terrenoHandler();
		
		var distanzaVerticaleOstacoli=dimYcanv/25;
		var ostacoli=[
			
		]
		
		for(i=0; i<distanzaVerticaleOstacoli; i++)
		{
				console.log(terrHandler.getTerreno(i*25));
				var numeroTerreno=terrHandler.getTerreno(i*25);
				console.log(numeroTerreno);
				var rigaOstacoli=[];
				for(z=0; z<4; z++)
				{
					rigaOstacoli.push(new Ostacolo(100, 25, Math.random()*(3*dimXcanv), i*25, terrHandler.terreno[numeroTerreno], 25))
				}
				ostacoli.push(rigaOstacoli);
		}
		
		function disegnaSchermo() {
			ctx.beginPath();
			ctx.clearRect(0, 0, dimXcanv, dimYcanv);
			ctx.closePath();
			terrHandler.gestisciTerreno();
			
			for(y=0; y<ostacoli.length; y++)
			{
				for(x=0; x<2; x++)
				{
					ostacoli[y][x].disegnaOstacolo(rana.x, rana.y);
				}
			}
			
			//ostacolo.disegnaOstacolo(rana.x, rana.y);
			rana.disegnaGiocatore();
			contPunteggio.innerHTML = punteggio;
        }
		
        let rana = new Giocatore(25);
		
		//Richiamo disegnaSchermo ad ogni frame
		setInterval(disegnaSchermo, 20);
    </script>
</body>

</html>